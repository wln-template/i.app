<style type="text/css">
    .nav{display:table;width:100%;margin-bottom:6px;}
    .nav > div{display:table-cell;width:20%;}
	.nav-item{display:inline-block;width:150px;font-size:1.4rem;line-height:2rem;text-align:center;border-bottom:0.2rem solid #999999;color:#333333;text-align:center;}
	.nav-item.active{border-bottom-color:#DC341D;background-color: #d0ebf5;}
</style>
<div class="wln">
    <div class="nav">
        <div>用户：@Html.Raw(ViewBag.CurrentUser)</div>
        <div style="width:60%;text-align:center;">
            <a class="nav-item active">内容管理权限</a>
            <a href="rightsystem?userid=@ViewBag.UserId" class="nav-item">系统管理权限</a>
            <a href="rightorgan?userid=@ViewBag.UserId" class="nav-item">部门及区域权限</a>
        </div>
        <div></div>
    </div>
    <table id="dataTable" class="datagrid">
        <tr>
            <td style="width:88px; text-align:center;" field="RowIndex">序号</td>
            <td style="width:auto; text-align:left;" field="Name">栏目名称</td>
            @*<td style="width:98px; text-align:center;" field="Code">栏目编号</td>*@
            <td style="width:98px; text-align:center;" function="onViewer">查看</td>
            <td style="width:98px; text-align:center;" function="onEditer">发布</td>
            <td style="width:98px; text-align:center;" function="onVerify">审核</td>
            <td style="width:98px; text-align:center;" function="onDelete">删除</td>
            <td style="width:auto; text-align:center;" function="onAction">&nbsp;</td>
        </tr>
    </table>
</div>

<script type="text/javascript">
    sessionStorage.setItem('inline', '<li>系统</li><li>用户管理</li><li>内容管理权限</li>');
    var table = control.datagrid('dataTable', location.pathname + '/pager?userid=@ViewBag.UserId', {}, 200);
    table.onViewer = function (e) {
        if (e.Viewer > 0) {
            return '<a onclick="Set(\'Column_Viewer\',\'' + e.Code + '\')" style="color:#7DB72F">已授权</a>';
        } else {
            return '<a onclick="Set(\'Column_Viewer\',\'' + e.Code + '\')" style="color:#999999">未授权</a>';
        }
    }
    table.onEditer = function (e) {
        if (e.Editer > 0) {
            return '<a onclick="Set(\'Column_Editer\',\'' + e.Code + '\')" style="color:#7DB72F">已授权</a>';
        } else {
            return '<a onclick="Set(\'Column_Editer\',\'' + e.Code + '\')" style="color:#999999">未授权</a>';
        }
    }
    table.onVerify = function (e) {
        if (e.Verify > 0) {
            return '<a onclick="Set(\'Column_Verify\',\'' + e.Code + '\')" style="color:#7DB72F">已授权</a>';
        } else {
            return '<a onclick="Set(\'Column_Verify\',\'' + e.Code + '\')" style="color:#999999">未授权</a>';
        }
    }
    table.onDelete = function (e) {
        if (e.Delete > 0) {
            return '<a onclick="Set(\'Column_Delete\',\'' + e.Code + '\')" style="color:#7DB72F">已授权</a>';
        } else {
            return '<a onclick="Set(\'Column_Delete\',\'' + e.Code + '\')" style="color:#999999">未授权</a>';
        }
    }
    table.onAction = function (e) {
        return '　　　　　';
    }
    function Set(Code, For) {
        $.getJSON(location.pathname + '/set', { userid: '@ViewBag.UserId', 'code': Code + '_' + For }, function (json) {
            if (json.success) {
                table.reload();
            } else {
                control.error(json.message);
            }
        });
    }
</script>